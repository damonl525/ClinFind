# FileSearcherV3 改进计划

> 目标：打造人人可用、易用的本地文件和内容全方位搜索定位工具

## 📊 当前版本评估

### ✅ 亮点
- **UI设计现代化**: Vue3 + Element Plus，渐变背景、卡片式布局
- **功能完整**: 支持 PDF/Word/Excel/PPT，精确定位到页码/幻灯片/工作表
- **技术栈合理**: FastAPI + SQLite FTS5 + Electron 跨平台架构

### ⚠️ 待改进
- 新用户引导缺失
- 文件类型过滤缺失
- 搜索结果交互不够直观
- 索引进度无可视化

---

## 🎯 三大改进方向

### 一、优化用户首次体验 ⭐⭐⭐⭐⭐

**优先级**: 🔴 高 | **预估工作量**: 1-2天 | **状态**: ✅ 已完成

**目标**: 让新用户能够"无脑"使用，3秒内理解如何开始

| 编号 | 改进项 | 状态 |
|------|--------|------|
| 1.1 | 添加欢迎引导对话框 | ✅ 已完成 |
| 1.2 | 空状态优化提示 | ✅ 已完成 |
| 1.3 | 索引进度可视化 | ✅ 已完成 |
| 1.4 | 拖拽文件夹支持 | ✅ 已完成 |

**详细说明**:
- **1.1 欢迎引导对话框**: 首次启动自动弹出，包含"添加你的第一个文件夹"按钮、支持格式说明、跳过按钮
- **1.2 空状态优化**: 无搜索范围时，显示引导文字"点击上方「管理搜索范围」添加文件夹"
- **1.3 索引进度可视化**: 添加进度条，显示 "正在索引: xxx.pdf (23/156)"
- **1.4 拖拽支持**: 直接拖拽文件夹到窗口完成添加

---

### 二、增强搜索结果交互 ⭐⭐⭐⭐

**优先级**: 🟡 中 | **预估工作量**: 2-3天 | **状态**: ✅ 已完成

**目标**: 让用户更快速地定位和操作搜索结果

| 编号 | 改进项 | 状态 |
|------|--------|------|
| 2.1 | 文件类型过滤器 | ✅ 已完成 |
| 2.2 | 位置信息突出显示 | ✅ 已完成 |
| 2.3 | 快捷操作按钮 | ✅ 已完成 |
| 2.4 | 结果排序选项 | ✅ 已完成 |
| 2.5 | 预览区增强 | ✅ 已完成 |

**详细说明**:
- **2.1 文件类型过滤器**: 搜索栏增加"类型"下拉框 (PDF/Word/Excel/PPT/全部)
- **2.2 位置信息突出**: 将"页码:3"等定位信息用醒目标签显示在结果卡片顶部
- **2.3 快捷操作按钮**: 每个结果卡片添加"打开文件"、"打开所在文件夹"、"复制路径"
- **2.4 结果排序选项**: 支持相关度/文件名/文件类型排序
- **2.5 预览区增强**: 显示文件类型标签、快捷操作按钮组

---

### 三、提升搜索能力与性能 ⭐⭐⭐

**优先级**: 🟢 中低 | **预估工作量**: 3-5天 | **状态**: ✅ 已完成

**目标**: 让搜索更智能、更快速

| 编号 | 改进项 | 状态 |
|------|--------|------|
| 3.1 | 搜索历史记录 | ✅ 已完成 |
| 3.2 | 搜索建议/自动补全 | ✅ 已完成 |
| 3.3 | 增量索引 | ⬜ 待完成（需后端支持） |
| 3.4 | 索引状态管理 | ✅ 已完成 |
| 3.5 | 高级搜索语法 | ⬜ 待完成（需后端支持） |

**详细说明**:
- **3.1 搜索历史**: ✅ 保存最近20条搜索记录，支持快速复用、删除单条、清空全部
- **3.2 搜索建议**: ✅ 输入时显示匹配的历史关键词，点击可快速填充
- **3.3 增量索引**: 需要后端监控文件夹变化，自动更新索引
- **3.4 索引状态管理**: ✅ 显示每个文件夹的状态标签，支持重新索引
- **3.5 高级搜索语法**: 需要后端支持 AND/OR/NOT、引号精确匹配

---

## 📝 更新日志

| 日期 | 版本 | 更新内容 |
|------|------|----------|
| 2026-01-30 | v3.3 | ✅ 添加 AI 智能搜索功能（查询扩展） |
| 2026-01-30 | v3.2.1 | ✅ 优化精度设置为直观的搜索模式切换 |
| 2026-01-30 | v3.2 | 创建改进计划文档 |

---

## 🔧 技术实现参考

### 欢迎引导对话框
```vue
<el-dialog v-model="showWelcome" title="🎉 欢迎使用文件搜索神器" width="500px">
  <div class="welcome-content">
    <p>只需两步即可开始：</p>
    <ol><li>添加文件夹</li><li>输入关键词搜索</li></ol>
    <el-button type="primary" @click="browseFolder(); showWelcome=false">
      📁 添加第一个文件夹
    </el-button>
  </div>
</el-dialog>
```

### 文件类型过滤
```typescript
const fileTypeOptions = [
  { label: '全部', value: '' },
  { label: 'PDF', value: 'pdf' },
  { label: 'Word', value: 'docx' },
  { label: 'Excel', value: 'xlsx' },
  { label: 'PPT', value: 'pptx' },
]
```

### 高级搜索语法
```python
def parse_advanced_query(query: str):
    """
    支持语法:
    - "精确匹配"
    - 关键词1 AND 关键词2
    - filename:xxx (仅搜索文件名)
    """
    pass
```
